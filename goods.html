<!DOCTYPE html>
<html>

<head>
    <title>페이징 처리 예제</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="Styles_goods.css">
</head>

<body>
    <div class="header">
        <div class="link_item">
            <p id="userId" style="display:none"></p>
            <a class="nav_link" href="login.html" onclick="login()">로그인</a>
            <a class="nav_link" href="mypage.html" style="display:none" id="myPageLink">내정보</a>
            <p id="userId" style="display:none"></p>
        </div>

        <h1 class="logo"><a href="/cookierun" class="_2yPVRArtDH N=a:GNB.storehome"><img
                    src="https://shop-phinf.pstatic.net/20231120_273/1700454835203IsrBj_PNG/CRO_Logo_ENG.png?type=m10000_10000"
                    data-src="https://shop-phinf.pstatic.net/20231120_273/1700454835203IsrBj_PNG/CRO_Logo_ENG.png?type=m10000_10000"
                    class="_1QhZSUVBeK" alt="쿠키런스토어"></a></h1>
        <div class="find_item">
            <div class="search"><input type="text" title="검색어 입력" placeholder="검색어를 입력해보세요" value="" class="_38DpYZHzTy"
                    maxlength="500"><button class="_1H_iy_tmiI N=a:GNB.search"><span class="Y4Wg6LWa6z"><span
                            class="blind">검색하기</span></span></button></div>
            <div class="list">
                <button onclick="filterItems('')">전체</button>
                <button onclick="filterItems('clothes')">의상</button>
                <button onclick="filterItems('electronics')">전자제품</button>
                <button onclick="filterItems('food')">음식</button>
            </div>
        </div>

    </div>
    <div class="container" id="item-container"></div>
    <div class="pagination" id="pagination"></div>

    <script>
        const itemsPerPage = 24; // 페이지당 아이템 수
        const items = [
            { name: "item1", price: "1000", image: "https://shop-phinf.pstatic.net/20230406_139/1680774590675RTw80_JPEG/81910424444651228_173986660.jpg?type=f750_750", category: "clothes" },
            { name: "item2", price: "2000", image: "image2.jpg", category: "clothes" },
            // 나머지 아이템들도 category 속성 추가

            { name: "item51", price: "51000", image: "image51.jpg", category: "electronics" },
            { name: "item52", price: "52000", image: "image52.jpg", category: "electronics" },
            // 나머지 아이템들도 category 속성 추가

            { name: "item81", price: "81000", image: "image81.jpg", category: "food" },
            { name: "item82", price: "82000", image: "image82.jpg", category: "food" },
            { name: "item81", price: "81000", image: "image81.jpg", category: "food" },
            { name: "item82", price: "82000", image: "image82.jpg", category: "food" },
            { name: "item81", price: "81000", image: "image81.jpg", category: "food" },
            { name: "item51", price: "51000", image: "image51.jpg", category: "electronics" },
            { name: "item52", price: "52000", image: "image52.jpg", category: "electronics" },
            // 나머지 아이템들도 category 속성 추가

            { name: "item81", price: "81000", image: "image81.jpg", category: "food" },
            { name: "item82", price: "82000", image: "image82.jpg", category: "food" },
            { name: "item81", price: "81000", image: "image81.jpg", category: "food" },
            { name: "item82", price: "82000", image: "image82.jpg", category: "food" },
            { name: "item81", price: "81000", image: "image81.jpg", category: "food" },
            { name: "item81", price: "81000", image: "image81.jpg", category: "food" },
            { name: "item82", price: "82000", image: "image82.jpg", category: "food" },
            { name: "item81", price: "81000", image: "image81.jpg", category: "food" },
            { name: "item82", price: "82000", image: "image82.jpg", category: "food" },
            { name: "item81", price: "81000", image: "image81.jpg", category: "food" },
            { name: "item82", price: "82000", image: "image82.jpg", category: "food" },
            { name: "item81", price: "81000", image: "image81.jpg", category: "food" },
            { name: "item82", price: "82000", image: "image82.jpg", category: "food" },
            { name: "item81", price: "81000", image: "image81.jpg", category: "food" },
            { name: "item82", price: "82000", image: "image82.jpg", category: "food" },
            { name: "item81", price: "81000", image: "image81.jpg", category: "food" },
            { name: "item82", price: "82000", image: "image82.jpg", category: "food" }
        ];


        function displayItems(items, startIndex, endIndex) {
            const container = document.getElementById("item-container");
            container.innerHTML = "";

            for (let i = startIndex; i < endIndex; i++) {
                const item = items[i];
                const itemElement = document.createElement("div");
                itemElement.classList.add("popup-item");

                // 이미지 엘리먼트 생성 및 추가
                const imageElement = document.createElement("img");
                imageElement.src = item.image;
                itemElement.appendChild(imageElement);

                // 아이템 정보 엘리먼트 생성 및 추가
                const itemInfoElement = document.createElement("div");
                itemInfoElement.classList.add("popup-item-info");

                const nameElement = document.createElement("div");
                nameElement.classList.add("popup-item-name");
                nameElement.textContent = item.name;
                itemInfoElement.appendChild(nameElement);

                const dateElement = document.createElement("div");
                dateElement.classList.add("popup-item-price");
                dateElement.textContent = item.price;
                itemInfoElement.appendChild(dateElement);

                const descElement = document.createElement("div");
                descElement.classList.add("popup-item-desc");
                descElement.textContent = item.desc;
                itemInfoElement.appendChild(descElement);

                itemElement.appendChild(itemInfoElement);

                container.appendChild(itemElement);
            }
        }


        function displayPagination(totalItems, currentPage) {
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            const pagination = document.getElementById("pagination");
            pagination.innerHTML = "";

            for (let i = 1; i <= totalPages; i++) {
                const pageLink = document.createElement("a");
                pageLink.href = "#";
                pageLink.classList.add("page-link");
                pageLink.textContent = i;

                if (i === currentPage) {
                    pageLink.classList.add("active");
                }

                pageLink.addEventListener("click", (event) => {
                    event.preventDefault();
                    displayItems(items, (i - 1) * itemsPerPage, i * itemsPerPage);
                    displayPagination(totalItems, i);
                });

                pagination.appendChild(pageLink);
            }
        }

        function filterItems(category) {
            let filteredItems;

            // 선택된 카테고리의 아이템만 필터링
            if (category === '') {
                filteredItems = items;
            } else {
                filteredItems = items.filter(item => item.category === category);
            }

            // 필터링된 아이템을 첫 페이지에 표시
            displayItems(filteredItems, 0, itemsPerPage);

            // 필터링된 아이템에 대한 페이징 표시
            displayPagination(filteredItems.length, 1);
        }

        function login() {
            // After successful login
            window.location.href = "/c:/Users/user/Desktop/ResponsiveWeb/goods.html?loginSuccess=true";
            // 여기에 실제 로그인 처리 코드를 추가해야 합니다.
            // 로그인이 성공하면 아래의 내용이 실행됩니다.

            // 예시로 아무 회원 아이디나 보여줌
            const fakeUserId = "user123";

            // 로그인 후 화면 변경
            const loginLinks = document.querySelector(".link_item");
            const myPageLink = document.getElementById("myPageLink");
            const userId = document.getElementById("userId");

            loginLinks.style.display = "none"; // 로그인 전 메뉴 감춤
            myPageLink.style.display = "block"; // 로그인 후 내 정보 링크 보임
            userId.style.display = "block"; // 유저 아이디 보임
            userId.textContent = "회원 아이디: " + fakeUserId;
        }


        // 초기 페이지 로드 시 전체 아이템 표시
        filterItems('');


        displayItems(items, 0, itemsPerPage);
        displayPagination(items.length, 1);

        function getQueryParam(name) {
            const urlSearchParams = new URLSearchParams(window.location.search);
            return urlSearchParams.get(name);
        }

        window.addEventListener('load', updateUIOnLogin);
    </script>
</body>

</html>